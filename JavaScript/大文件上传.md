### 单文件上传的两种方案

1. form 表单提交（目前项目中很少使用）
2. 基于 AJAX 请求：一般上传文件体积较大，所以通常选择 post 方式
   - 方式一：
     基于 FormData数据格式 将选中的文件上传给服务器，服务器端接收到客户端传递过来的 file 等信息后在服务器端创建 file 文件，然后把服务器存储的文件地址返回给客户端
   - 方式二：
     给服务器传递当前文件的BASE64编码（文件流信息），服务器端接收到base64信息后，把base64转换为具体的图片或文件存储，返回存储图片的地址



### 大文件上传

**可以在前端把大文件切片化（一般切片为5个）**

利用HTTP可以多个并发传递（一般是6~7个，也就是说客户端可以同时向服务器发送7个HTTP请求）

1. file 是 Blob 类的实例，Blob.prototype.slice 这个方法可以把一个文件切片处理
2. 同时并发五个切片的上传
3. 等5个都上传完，在向服务器发送一个合并图片的请求

**服务端处理**

/chunk 处理每一个切片的请求
	chunk: 文件切片
	filename: 切片的名字  hash-数字.后缀

upload 目录下创建一个以 hash 命名的临时目录
	xxxxxxx123456	// 把切片存储到这个目录下
		xxxxxxx123456-0.png
		xxxxxxx123456-1.png
		xxxxxxx123456-2.png
	... ...

/merge  合并
	filename：文件名  hash.后缀
	根据  hash 找到之前存储的临时目录，按顺序读取目录中的切片信息，把每个切片信息合并到最后的一张图片中（合并完成后删除临时目录里面的切片）